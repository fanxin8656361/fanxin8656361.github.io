(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b10a5c5c"],{1251:function(e,i,t){"use strict";t("3fa7")},"3fa7":function(e,i,t){},"49d9":function(e,i,t){"use strict";var l=function(){var e=this,i=e._self._c;return e.uploaddialogshow?i("div",{staticClass:"dialog-root",on:{click:function(i){return i.target!==i.currentTarget?null:e.closeTap.apply(null,arguments)}}},[i("div",{staticClass:"dialog-box"},[e._m(0),i("i",{staticClass:"Audi-Dash Audi-Dashclose close",on:{click:e.closeTap}}),i("div",{staticClass:"control"},[i("button",{staticClass:"new-button",on:{click:function(i){return e.addTemp("image")}}},[e._v("添加图片")]),i("button",{staticClass:"new-button",on:{click:function(i){return e.addTemp("video")}}},[e._v("添加视频")])]),i("div",{staticClass:"dialog-content"},[e._l(e.uploadArr,(function(t,l){return["image"==t.type?i("div",{key:t.type+l,staticClass:"line-box"},[i("div",{staticClass:"line-label required"},[e._v("图片")]),i("div",{staticClass:"content"},[i("uploadFile",{key:l,attrs:{fileType:[".jpg",".png",".jpeg"],limit:1,isShowTip:!1,small:!0},model:{value:t.image,callback:function(i){e.$set(t,"image",i)},expression:"item.image"}})],1),i("div",{staticClass:"del"},[e.uploadArr&&e.uploadArr.length>1?i("i",{staticClass:"Audi-Dash Audi-Dashdelete icon",on:{click:function(i){return e.delClick(t,l)}}}):e._e()])]):"video"==t.type?i("div",{key:t.type+"-"+l,staticClass:"line-box"},[i("div",{staticClass:"line-label"},[e._v("视频")]),i("div",{staticClass:"content"},[i("uploadFile",{attrs:{fileType:[".png",".jpg",".jpeg"],limit:1,uploadText:"点击上传封面",isShowTip:!1,small:!0},model:{value:t.cover,callback:function(i){e.$set(t,"cover",i)},expression:"item.cover"}}),i("uploadFile",{attrs:{fileType:[".mp4",".avi",".flv"],limit:1,uploadText:"点击上传视频",isShowTip:!1,small:!0},model:{value:t.video,callback:function(i){e.$set(t,"video",i)},expression:"item.video"}})],1),i("div",{staticClass:"del"},[e.uploadArr&&e.uploadArr.length>1?i("i",{staticClass:"Audi-Dash Audi-Dashdelete icon",on:{click:function(i){return e.delClick(t,l)}}}):e._e()])]):e._e()]}))],2),i("div",{staticClass:"dialog-foot"},[i("button",{staticClass:"primary-button",on:{click:function(i){return i.stopPropagation(),e.submit.apply(null,arguments)}}},[i("span",[e._v("保存并提交")])])])])]):e._e()},a=[function(){var e=this,i=e._self._c;return i("div",{staticClass:"title-box"},[i("div",{staticClass:"border"}),e._v("商品详情列表 ")])}],s=t("800c"),o={components:{uploadFile:s["a"]},props:{value:{type:Array,default:()=>[]},uploaddialogshow:{type:Boolean,default:!1}},data(){return{uploadArr:[{type:"image",image:[]}],imageTemplate:{type:"image",image:[]},videoTemplate:{type:"video",cover:[],video:[]}}},watch:{value:{handler(e){if(e){const i=Array.isArray(e)?e:[];i&&i.length&&(this.uploadArr=i)}else this.uploadArr=[{type:"image",image:[]}]},deep:!0,immediate:!0}},methods:{closeTap(){this.$emit("update:uploaddialogshow",!1)},addTemp(e){this.uploadArr.length>9?this.$message.info("达到上限"):"image"===e?this.uploadArr.push(this.imageTemplate):"video"===e&&this.uploadArr.push(this.videoTemplate)},delClick(...[,e]){this.uploadArr=this.uploadArr.filter((...[,i])=>e!=i)},submit(){const e=this.uploadArr.every(e=>!("image"==e.type&&e.image.length<=0));e?(this.$emit("input",JSON.stringify(this.uploadArr)),console.log("传出内容")):this.$message.error("有必填选项未填")}}},n=o,r=(t("6f49"),t("2877")),d=Object(r["a"])(n,l,a,!1,null,"49a10d3c",null);i["a"]=d.exports},"578f":function(e,i,t){"use strict";t.r(i);var l=function(){var e=this,i=e._self._c;return i("div",[i("br"),e._l(e.dialogs,(function(t,l){return[e.id==t.mixinName?i("span",{key:l,attrs:{title:"点击进入页面预览"},on:{click:function(i){return e.tap(t,l)}}},[e._v(e._s(t.name))]):e._e()]})),i("br"),i("br"),i("otherPages4Dialog1",{attrs:{uploaddialogshow:e.uploaddialogshow},on:{"update:uploaddialogshow":function(i){e.uploaddialogshow=i}}})],2)},a=[],s=t("49d9"),o={props:{id:{type:String,default:""}},components:{otherPages4Dialog1:s["a"]},data(){return{uploaddialogshow:!1,dialogs:[{showkey:"uploaddialogshow",name:"上传商品详情（图片/视频）-弹窗",mixinName:"otherPages4Dialog1"}]}},methods:{tap(e,i){this[e.showkey]=!0}}},n=o,r=t("2877"),d=Object(r["a"])(n,l,a,!1,null,null,null);i["default"]=d.exports},"5fb9":function(e,i,t){},"6f49":function(e,i,t){"use strict";t("5fb9")},"800c":function(e,i,t){"use strict";var l=function(){var e=this,i=e._self._c;return i("div",{class:["component-upload-image",e.small?"small-upload":""]},[i("el-upload",{ref:"uploadImage",class:{hide:this.fileList.length>=this.limit},attrs:{action:e.uploadImgUrl,"list-type":"picture-card","on-success":e.handleUploadSuccess,"before-upload":e.handleBeforeUpload,"on-change":e.andleChangeFile,limit:e.limit,multiple:e.multiple,"on-error":e.handleUploadError,"on-exceed":e.handleExceed,name:"file","on-remove":e.handleRemove,"show-file-list":!0,headers:e.headers,"file-list":e.fileList,accept:e.fileType.join(","),"on-preview":e.handlePictureCardPreview}},[i("span",{staticClass:"icon-upload"},[i("img",{attrs:{src:t("cf55"),alt:""}}),i("p",{staticClass:"upload-text"},[e._v(e._s(e.uploadText))])])]),e.showTip?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传 "),e.fileSize?[e._v(" 大小不超过 "),i("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileSize)+"MB")])]:e._e(),e.fileType?[e._v(" 格式为 "),i("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileType.join("/")))])]:e._e(),e._v(" 的文件 ")],2):e._e(),i("el-dialog",{attrs:{visible:e.dialogVisible,title:"预览",width:"800","append-to-body":""},on:{"update:visible":function(i){e.dialogVisible=i}}},[i("img",{staticStyle:{display:"block","max-width":"100%",margin:"0 auto"},attrs:{src:e.dialogImageUrl}})])],1)},a=[],s={props:{value:[String,Object,Array],multiple:{type:Boolean,default:!1},limit:{type:Number,default:5},fileSize:{type:Number,default:5},fileType:{type:Array,default:()=>[".png",".jpg",".jpeg"]},isShowTip:{type:Boolean,default:!0},uploadText:{type:String,default:"点击上传图片"},small:{type:Boolean,default:!1}},data(){return{dialogImageUrl:"",dialogVisible:!1,hideUpload:!1,baseUrl:"http://192.168.3.8/dev-api",uploadImgUrl:"http://192.168.3.8/dev-api/common/upload",headers:{Authorization:"Bearer "},fileList:[]}},watch:{value:{handler(e){if(!e)return this.fileList=[],[];{const i=Array.isArray(e)?e:this.value.split(",");this.fileList=i.map(e=>("string"===typeof e&&(e=(e.indexOf(this.baseUrl),{name:e,url:e})),e))}},deep:!0,immediate:!0}},computed:{showTip(){return this.isShowTip&&(this.fileType||this.fileSize)}},methods:{handleRemove(e,i){const t=this.fileList.map(e=>e.name).indexOf(e.name);t>-1&&(this.fileList.splice(t,1),this.$emit("input",this.listToString(this.fileList)))},handleUploadSuccess(e,i,t){t.every(e=>"success"==e.status)&&(t.map(e=>{e.response&&this.fileList.push({name:e.response.fileName,url:e.response.url})}),this.$emit("input",this.listToString(this.fileList)),this.loading.close())},async andleChangeFile(e,i){console.log("fileList===>",i),console.log("file===>",e)},async handleBeforeUpload(e){let i=!1;if(this.fileType.length){let t="";e.name.lastIndexOf(".")>-1&&(t=e.name.slice(e.name.lastIndexOf("."))),console.log(t,6666),i=this.fileType.some(i=>e.type.indexOf(i)>-1||!!(t&&t.indexOf(i)>-1))}else i=e.type.indexOf("image")>-1;if(!i)return this.$message.error(`文件格式不正确, 请上传${this.fileType.join("/")}格式文件!`),!1;if(this.fileSize){const i=e.size/1024/1024<this.fileSize;if(!i)return this.$message.error(`上传文件大小不能超过 ${this.fileSize} MB!`),!1}this.loading=this.$loading({lock:!0,text:"上传中",background:"rgba(0, 0, 0, 0.7)"})},handleExceed(){this.$message.error(`上传文件数量不能超过 ${this.limit} 个!`)},async handleUploadError(e){this.$message({type:"error",message:"上传失败"}),this.loading.close()},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},listToString(e,i){let t="";i=i||",",console.log(e);for(let l in e)t+=e[l].url.replace(this.baseUrl,"")+i;return""!=t?t.substr(0,t.length-1):""}}},o=s,n=(t("1251"),t("2877")),r=Object(n["a"])(o,l,a,!1,null,"f4b5ca34",null);i["a"]=r.exports},cf55:function(e,i){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABECAYAAADDRGZtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJoSURBVHgB7dtRTtswGMDx7zPdWxkJ8L5wg+4E2xF2A+AEsBNQbgAnWDjCTjCOsBsse51Ukq68jeWb3dVSVYXWTj4nduW/VKklRvRH1FLbAUFWzhc3RHAt7ybQQ0gvZ2maFvrxrJzniOKcEHNR/7ldP2aaWCGm0BNiW0h0QfjmW1mWGVgmiPACvIqyFcbqFyvUN4J3KczICiPA3yY2GJ8hKmOM7xCVESYEiGonJhSIaol57WBIENVkNn/+0nQgNMjyj2YTJjiIqgkTJES1iQkWolrHjCDwlphy/jPoM6KTU4CrvYDIEnyqFgQ9tzmx4mioM8I+iRsEUoP4BMwNApEvzhv5TnMNjA3yGln78YWcDRbA0MAQvvbl7TdCvCtCfCtCLPq+ujnNKaQmvDxODt+rG1H9GRzmDKIQp+k4149P0qO7mugSHOUEsonQnaZvc1cYdojca7ltQugURo0B5lgh6gmepIfTXePUGG4MG8QUoePGsEBsETpOTGdIW4SOC9MJ0hWh48C0hnAhdF0xrSDcCF0XjDXEFULXFmMFcY3QtcEYLz4gYp4ejZ19VmpqVi7uEOHKZKzxGXmp6QF6joAeTccaQwTUH6HnDgS+Mx1rvD+ilu7l6mAlQTsnSXKB+nHbcbnNPIFd679i9GF1xZLZ8+NfoMPiOBmfbRvxVP3+IcdlwFics/tWhPhWhPhWhPhWhPiWAwhlv8rnyWtH/1+cjBkw52gzFIu/RF/lB8xq/atyfz05QDgHBxcMxF1d34oQ39orSAXBR4WQe3v3EHhE+IDqjlw/miKSXD/Cwf+rxy6qJOJeLej9AzdaIljvFDJWAAAAAElFTkSuQmCC"}}]);